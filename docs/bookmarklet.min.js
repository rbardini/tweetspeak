(function tweetspeak(){if(typeof window.jQuery==="undefined"){window.setTimeout(tweetspeak,200)}else{var c=jQuery=window.jQuery,i="7F49F33CD9011FCDCC9ADD5E88B79B6B82525881",d="http://api.microsofttranslator.com/V2/Ajax.svc/",f="audio/wav",a=["ca","ca-es","da","da-dk","de","de-de","en","en-au","en-ca","en-gb","en-in","en-us","es","es-es","es-mx","fi","fi-fi","fr","fr-ca","fr-fr","it","it-it","ja","ja-jp","ko","ko-kr","nb-no","nl","nl-nl","no","pl","pl-pl","pt","pt-br","pt-pt","ru","ru-ru","sv","sv-se","zh-chs","zh-cht","zh-cn","zh-hk","zh-tw"];h()}function g(j,k,l){if(typeof(k)==="undefined"){k={}}k.appId=i;return c.ajax({url:d+j,dataType:"jsonp",jsonp:"oncomplete",data:k}).success(function(m){if(typeof l==="function"){l(m)}})}function b(){var l=c(this).find("b").text("Loading..."),k=c(this).closest(".content").find(".js-tweet-text").text().replace(/\"/g,"'"),j={text:k,format:f};g("Detect",j,function(m){if(c.inArray(m,a)!==-1){j.language=m;g("Speak",j,function(o){var n=document.createElement("audio");n.src=o;n.play();n.addEventListener("playing",function(){l.text("Speaking ("+m.toUpperCase()+")")},false);n.addEventListener("ended",function(){l.text("Speak")},false)})}else{l.text("Can't speak in "+m.toUpperCase())}})}function e(k){var j='<li class="action-speak-container"><a class="with-icn js-action-speak" href="#" title="Speak"><i class="sm-speak"/><b>Speak</b></a></li>';c(j).insertAfter(k.find(".action-fav-container")).click(b)}function h(){c("head").append('<style>.js-action-speak {color:#0064CD !important} .sm-speak {background:#0064CD url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAcCAMAAABWBG9SAAAACVBMVEUAAAD29vb///8kb9lQAAAAAXRSTlMAQObYZgAAAEZJREFUeNqVzzEOACAMQtGv9z+0aerQpKQo41sAlsiICEQggRQkE9axqEFs0VU7/uP7FhkRgQgkkIJkwjoWNYgtumrHv38/oAMCv8Ts8xAAAAAASUVORK5CYII=") no-repeat left top; width:14px; height:14px} .opened-tweet .sm-speak {background-position:left bottom} #tweetspeak-bar {background:#DFF1DF; border-top:1px solid #BBE2BB; -webkit-box-shadow: inset 0 3px 8px rgba(0,0,0,.05); -moz-box-shadow: inset 0 3px 8px rgba(0,0,0,.05); box-shadow: inset 0 3px 8px rgba(0,0,0,.05); display:none; font-size:13px; padding:10px 1px; text-align:center; text-shadow: 0 1px 0 rgba(255, 255, 255, .6); z-index:2; zoom:1} .tweetspeak-warning {background:#FFF0C0 !important; border-color:#FFE38D !important}</style>');var l,k=c('<div class="stream-item"><div id="tweetspeak-bar"></div></div>').prependTo(c(".js-stream-manager-container")).children(),j=document.createElement("audio");if(j!==null&&j.canPlayType&&j.canPlayType(f)){e(c(".stream-item"));c(document).bind("DOMNodeInserted",function(n){var m=c(n.target);if(m.is(".stream-item, .js-tweet-details-fixer")){e(m)}});l="Tweetspeak set up! Click the <em>Speak</em> link below any tweet to listen."}else{k.addClass("tweetspeak-warning");l='Your browser does not support HTML5 Audio or the WAV format.<br/>Visit <a href="http://browsehappy.com/">Browse Happy</a> and upgrade your browser!'}k.html(l).slideDown();window.setTimeout(function(){k.slideUp()},15000)}})();